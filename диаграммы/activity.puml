@startuml
title Генерация и проверка кода
start
:Пользователь вводит запрос;
if (Модель загружена?) then (Да)
else (Нет)
  :Загрузить локальную GPT-модель;
endif
:GPT генерирует код;

partition Анализ кода {
  :Парсинг кода в AST;
  if (Есть ошибки?) then (Да)
    :Запросить рефакторинг у GPT;
    :Парсинг кода повторно;
    if (Ошибки остались?) then (Да)
      :Сообщить об ошибке пользователю;
      stop
    endif
  endif
}

:Вывести результат в VS Code;
stop
@enduml
